<!DOCTYPE html>
<html lang="en">
<head>
  <title>Commercial Direct</title>

  <!-- Viewport mobile tag for sensible mobile support -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


  <!--
      Stylesheets and Preprocessors
      ==============================

      You can always bring in CSS files manually with `<link>` tags, or asynchronously
      using a solution like AMD (RequireJS).  Or, if you like, you can take advantage
      of Sails' conventional asset pipeline (boilerplate Gruntfile).

      By default, stylesheets from your `assets/styles` folder are included
      here automatically (between STYLES and STYLES END). Both CSS (.css) and LESS (.less)
      are supported. In production, your styles will be minified and concatenated into
      a single file.

      To customize any part of the built-in behavior, just edit `tasks/pipeline.js`.
      For example, here are a few things you could do:

          + Change the order of your CSS files
          + Import stylesheets from other directories
          + Use a different or additional preprocessor, like SASS, SCSS or Stylus
  -->
  <link rel="canonical" href="<%=: req.path | appendAppUrl %>"/>
  <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,600,600i,700,700i,800,800i,900"
        rel="stylesheet">
  <link rel="stylesheet" href="/styles/frontend/bootstrap.min.css">
  <link rel="stylesheet" href="/styles/frontend/main.css?x=1">
  <script src="/js/jquery-1.11.2.min.js"></script>
  <script src="/js/jquery-ui.min.js"></script>
  <script src="/js/jquery.form.min.js"></script>
  <script src="/js/frontend/jquery.main.js"></script>
  <script src="/js/jquery.validate.min.js"></script>
  <script src="/js/jquery-mask.js"></script>

</head>

<body class="home">
<div id="wrapper">

  <% include ../header.ejs %>
  <main id="main">
    <div class="inner-banner">
      <div class="bg-cover">
        <img src="/images/frontend/img05.jpg" alt="image description">
      </div>
      <div class="container text-center">
        <h1>Commercial Loan Application</h1>
      </div>
    </div>
    <div class="application-container">
      <div class="container">
        <div class="row">
          <div class="col-sm-4 col-md-3">
            <aside class="aside-menu-wrap">
              <div class="mobile-count">
                <div class="counter">
                  <span class="count">1/11</span>
                </div>
              </div>
              <ol class="aside-menu">
                <li class="<%= step == 1 ? 'active' : status.personalBorrowerInfo == 'true' ? 'passed' : '' %>">
                  <a href="javascript:void(0)">Personal or borrowing entity information</a>
                </li>
                <li class="<%= step == 2 ? 'active' : status.loanRequest == 'true' ? 'passed' : '' %>">
                  <a
                    href="<%= status.personalBorrowerInfo == 'true' ? '/application/loan-request' : 'javascript:void(0)' %>"
                    onclick="return confirmDialog();">Loan Request</a>
                </li>
                <li class="<%= step == 3 ? 'active' : status.propertyInfo == 'true' ? 'passed' : '' %>">
                  <a
                    href="<%= status.personalBorrowerInfo == 'true' ? '/application/property-info' : 'javascript:void(0)' %>"
                    onclick="return confirmDialog();">Subject Property Information</a>
                </li>
                <li class="<%= step == 4 ? 'active' : status.businessInfo == 'true' ? 'passed' : '' %>">
                  <a
                    href="<%= status.personalBorrowerInfo == 'true' ? '/application/business-info' : 'javascript:void(0)' %>"
                    onclick="return confirmDialog();">Business Information</a>
                </li>
                <li class="<%= step == 5 ? 'active' : status.employmentInfo == 'true' ? 'passed' : '' %>">
                  <a
                    href="<%= status.personalBorrowerInfo == 'true' ? '/application/employment-info' : 'javascript:void(0)' %>"
                    onclick="return confirmDialog();">Employment Information</a>
                </li>
                <li class="<%= step == 6 ? 'active' : status.incomeExpenseInfo == 'true' ? 'passed' : '' %>">
                  <a
                    href="<%= status.personalBorrowerInfo == 'true' ? '/application/income-expense-info' : 'javascript:void(0)' %>"
                    onclick="return confirmDialog();">Annual Income And Combined Housing
                    Expense Information</a>
                </li>
                <li class="<%= step == 7 ? 'active' : status.assetsLiabilities == 'true' ? 'passed' : '' %>">
                  <a
                    href="<%= status.personalBorrowerInfo == 'true' ? '/application/assets-liabilities' : 'javascript:void(0)' %>"
                    onclick="return confirmDialog();">Assets And Liabilities</a>
                </li>
                <li class="<%= step == 8 ? 'active' : status.personalDeclarations == 'true' ? 'passed' : '' %>">
                  <a
                    href="<%= status.personalBorrowerInfo == 'true' ? '/application/personal-declarations' : 'javascript:void(0)' %>"
                    onclick="return confirmDialog();">Personal Declarations</a>
                </li>
                <li class="<%= step == 9 ? 'active' : status.businessDeclarations == 'true' ? 'passed' : '' %>">
                  <a
                    href="<%= status.personalBorrowerInfo == 'true' ? '/application/business-declarations' : 'javascript:void(0)' %>"
                    onclick="return confirmDialog();">Business Declarations</a>
                </li>
                <li class="<%= step == 10 ? 'active' : status.generalAuthorization == 'true' ? 'passed' : '' %>">
                  <a
                    href="<%= status.personalBorrowerInfo == 'true' ? '/application/general-authorization' : 'javascript:void(0)' %>"
                    onclick="return confirmDialog();">General Authorization</a>
                </li>
                <li class="<%= step == 11 ? 'active' : status.infoForMonitoring == 'true' ? 'passed' : '' %>">
                  <a
                    href="<%= status.personalBorrowerInfo == 'true' ? '/application/info-for-monitoring' : 'javascript:void(0)' %>"
                    onclick="return confirmDialog();">Information For Government
                    Monitoring Purposes</a>
                </li>
              </ol>
            </aside>
          </div>
          <div class="col-sm-8 col-md-offset-1 col-md-8">
            <div id="pleasewait" class="modal" style="display:none">
              <div class="content">
                <div class="header">
                </div>
                <div class="body">
                  <img src="/images/frontend/loading.gif" alt="Loading ..." height="130px" width="120px">
                </div>
              </div>
            </div>
            <%- body %>
          </div>
        </div>
      </div>
    </div>
  </main>
  <% include ../footer.ejs %>

  <!--
      Client-side Templates
      ========================

      HTML templates are important prerequisites of modern, rich client applications.
      To work their magic, frameworks like Backbone, Angular, Ember, and Knockout require
      that you load these templates client-side.

      By default, your Gruntfile is configured to automatically load and precompile
      client-side JST templates in your `assets/templates` folder, then
      include them here automatically (between TEMPLATES and TEMPLATES END).

      To customize this behavior to fit your needs, just edit `tasks/pipeline.js`.
      For example, here are a few things you could do:

          + Import templates from other directories
          + Use a different template engine (handlebars, jade, dust, etc.)
          + Internationalize your client-side templates using a server-side
            stringfile before they're served.
  -->


  <!--

    Client-side Javascript
    ========================

    You can always bring in JS files manually with `script` tags, or asynchronously
    on the client using a solution like AMD (RequireJS).  Or, if you like, you can
    take advantage of Sails' conventional asset pipeline (boilerplate Gruntfile).

    By default, files in your `assets/js` folder are included here
    automatically (between SCRIPTS and SCRIPTS END).  Both JavaScript (.js) and
    CoffeeScript (.coffee) are supported. In production, your scripts will be minified
    and concatenated into a single file.

    To customize any part of the built-in behavior, just edit `tasks/pipeline.js`.
    For example, here are a few things you could do:

        + Change the order of your scripts
        + Import scripts from other directories
        + Use a different preprocessor, like TypeScript

  -->

</div>

<script>
  function confirmDialog() {
    // console.log(JSON.stringify(status), step)
    //return false;
    var isBorrowerInfo = '<%= status.personalBorrowerInfo %>';
    var isSubmitted = '<%= application.isSubmitted %>'
    if (isBorrowerInfo == 'false' || isSubmitted == 'true') {
      return true;
    }
    else {
      return confirm("Unsaved information will be lost. Do you want to proceed?");
    }

  }
</script>

</body>
</html>
